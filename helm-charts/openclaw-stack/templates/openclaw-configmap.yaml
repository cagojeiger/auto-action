{{- if .Values.openclaw.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "openclaw-stack.openclawName" . }}-config
  labels:
    {{- include "openclaw-stack.labels" . | nindent 4 }}
    app.kubernetes.io/component: openclaw
data:
  openclaw.json: |
    {
      "gateway": {
        "trustedProxies": ["loopback", "uniquelocal"]
      },
      "agents": {
        "defaults": {
          "model": {
            "primary": "litellm/gemini-2.0-flash"
          }
        }
      },
      "models": {
        "providers": {
          "litellm": {
            "baseUrl": "{{ .Values.openclaw.litellm.baseUrl }}",
            "api": "openai-completions",
            "models": [
              {
                "id": "gemini-2.0-flash",
                "name": "Gemini 2.0 Flash (via LiteLLM)",
                "contextWindow": 1048576,
                "maxTokens": 8192,
                "reasoning": false,
                "input": ["text", "image"],
                "cost": { "input": 0, "output": 0, "cacheRead": 0, "cacheWrite": 0 }
              }
            ]
          }
        }
      },
      "browser": {
        "enabled": true,
        "defaultProfile": "browserless",
        "profiles": {
          "browserless": {
            "cdpUrl": "http://{{ include "openclaw-stack.browserlessName" . }}:{{ .Values.browserless.service.port }}",
            "color": "#FF4500"
          }
        }
      }
    }
{{- end }}
